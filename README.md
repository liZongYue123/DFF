# 从聚焦测量深度
**从聚焦测量深度** 是一个3D重构的方法，即从聚焦获得深度信息，从而完整的还原被测物的3D信息
使用对焦测深度是一种有效的方法，不会像立体相机那样成本过大，也一定程度上提高了线扫激光和结构光的测高精度

>根据镜头的光学原理，当物体不在工作距离(焦平面)时，就会形成模糊圈。
如果我们看到的图像在整个过程中都是完美聚焦的，那么它就说明这个物体处于一个正面平行的平面世界。如果只有一些部分在焦点上，那么它表面对象具有3D结构!

为了利用这一点, 如果保持**景深**尽可能小，并通过每次改变焦点来拍摄一堆图像。
然后由**聚焦算子**逐像素处理，以找到最可能聚焦的深度值。

### 假设:
* 假设图像在改变焦点时不会发生轴向视差。如果我们使用远心镜头，那没问题，否则它必须进行预处理以对准。

### 运行算子:
* 运行对焦算子, **Sum Modified Laplacian** (SML) 核大小设为3.
* **Gaussian Interpolation** 寻找最优深度.
* 使用最优的深度图进行重构 **All-Focused image**.
* 调用CV中值滤波去除噪声.
* 创建 **2D Grayscaled Depth Plot**.
* 创建 **3D Depth Surface Plot**.
* 使用 `python3 dff.py` 运行脚本.

### 图片集:
107张IGBT

## 可优化点:
* 使用光流法/SIFT算法来纠正轴向视差。
* 使用图像分割算法来微调深度图。
